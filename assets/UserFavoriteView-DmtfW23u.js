import{_ as V,k as D,s as _,f as I,m as P,c as r,a as t,d as p,w as f,B as T,F as v,x as k,r as h,o as n,b,q as S,t as i,z as l,u as j}from"./index-CryKrSl-.js";import{u as B}from"./favoriteStore-CqBkUvNE.js";import{V as R}from"./VueLoading-BwiBs25a.js";const z={components:{VueLoading:R},setup(){const a=B(),s=D(),m=j(),{isLoading:o,products:g,favoriteProduct:y,favoriteData:c}=_(a),{getProducts:u,getFavorite:e,removeFavorite:d,addFavorite:x}=a,{cart:w}=_(s),{addCart:C}=s,L=I({loadingItem:""});function N(F){m.push(`/product/${F}`)}return P(()=>{u(),e()}),{isLoading:o,products:g,favoriteProduct:y,favoriteData:c,getProducts:u,getFavorite:e,removeFavorite:d,addFavorite:x,cart:w,addCart:C,status:L,getProduct:N}}},U={class:"mb-5"},$={class:"container"},q={"aria-label":"breadcrumb",style:{"--bs-breadcrumb-divider":"'>'"},class:"mt-3 mb-lg-4 d-flex justify-content-start"},E={class:"breadcrumb"},M={class:"breadcrumb-item"},A={class:"row mt-4 mb-5 bg-light rounded-4 py-3 d-lg-block d-none"},G={class:"col table-responsive mt-4 mb-4 overflow-x-hidden"},H={class:"table align-middle text-center table-light table-borderless"},J={class:"text-center"},K={class:"favorite-table"},O=["onClick"],Q={class:"text-nowrap"},W={key:0,class:"h5 text-black-50"},X={key:0,class:"h6 text-black-50"},Y={key:1,class:"h5 text-dark"},Z={class:"text-nowrap text-end ps-4 ps-lg-0"},tt=["disabled","onClick"],st={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"},et=["disabled","onClick"],ot={class:"d-block d-lg-none py-3 mt-4 mb-3"},nt=["onClick"],rt={class:""},at={class:"d-flex justify-content-end align-items-center mt-2"},it={key:0,class:"h5 text-black-50"},lt={key:1,class:"h6 text-black-50 me-2"},dt={key:2,class:"h5 text-dark"},ct={class:"d-flex justify-content-between align-items-center mt-2"},bt=["disabled","onClick"],ut={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"},vt=["disabled","onClick"],pt={class:"d-flex justify-content-end mb-5"},ft={key:2,class:"py-5 mb-5 text-center"};function mt(a,s,m,o,g,y){const c=h("RouterLink"),u=h("VueLoading");return n(),r(v,null,[s[15]||(s[15]=t("div",{class:"my-5 position-relative banner container-fluid",style:{background:"linear-gradient(to right, #336b87, #90afc5, #336b87)"}},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title fs-2"},"我的最愛")],-1)),t("section",U,[t("div",$,[t("nav",q,[t("ol",E,[t("li",M,[p(c,{to:"/",class:"text-dark hover-nav fw-bold"},{default:f(()=>s[0]||(s[0]=[b("首頁")])),_:1})]),s[1]||(s[1]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"我的最愛",-1))])]),o.isLoading?(n(),T(u,{key:0,active:!0})):o.favoriteProduct.length!==0?(n(),r(v,{key:1},[s[12]||(s[12]=t("div",{class:"d-flex justify-content-center mt-5"},[t("h2",{class:"fw-bold text-dark"},"我的最愛清單")],-1)),t("div",A,[t("div",G,[t("table",H,[s[6]||(s[6]=t("thead",{class:"table-secondary"},[t("tr",null,[t("th"),t("th",{class:"text-nowrap"},"行程名稱"),t("th",{class:"text-nowrap"},"價格"),t("th"),t("th",{class:"text-end"})])],-1)),t("tbody",J,[(n(!0),r(v,null,k(o.favoriteProduct,e=>(n(),r("tr",{class:"table-nowrap",key:e.id},[t("td",K,[t("div",{class:"m-auto rounded-2 favorite-table-img",style:S({backgroundImage:`url(${e.imageUrl})`})},null,4)]),t("td",{class:"text-nowrap fw-bold text-primary cursor-pointer hover-nav",onClick:d=>o.getProduct(e.id)},i(e.title),9,O),t("td",Q,[e.price?l("",!0):(n(),r("div",W," NTD "+i(a.$format.currency(e.origin_price)),1)),t("div",null,[e.price?(n(),r("del",X,"NTD "+i(a.$format.currency(e.origin_price)),1)):l("",!0),e.price?(n(),r("div",Y," NTD "+i(a.$format.currency(e.price)),1)):l("",!0)])]),t("td",Z,[t("button",{type:"button",class:"btn btn-outline-primary px-4",disabled:o.status.loadingItem===e.id,onClick:d=>o.addCart(e.id)},[o.status.loadingItem===e.id?(n(),r("div",st,s[2]||(s[2]=[t("span",{class:"visually-hidden"},"Loading...",-1)]))):l("",!0),s[3]||(s[3]=t("i",{class:"bi bi-cart-fill"},null,-1)),s[4]||(s[4]=b(" 加入購物車 "))],8,tt)]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:o.status.loadingItem===e.id,onClick:d=>o.removeFavorite(e)},s[5]||(s[5]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,et)])]))),128))])])])]),t("div",ot,[(n(!0),r(v,null,k(o.favoriteProduct,e=>(n(),r("div",{class:"bg-light p-3 shadow-sm rounded-4 mb-3",key:e.id},[t("div",{class:"text-primary fw-bold cursor-pointer hover-nav mb-4",onClick:d=>o.getProduct(e.id)},[t("span",rt,i(e.title),1)],8,nt),t("div",at,[e.price?l("",!0):(n(),r("div",it," NTD "+i(a.$format.currency(e.origin_price)),1)),e.price?(n(),r("del",lt,"NTD "+i(a.$format.currency(e.origin_price)),1)):l("",!0),e.price?(n(),r("div",dt," NTD "+i(a.$format.currency(e.price)),1)):l("",!0)]),t("div",ct,[t("button",{type:"button",class:"btn btn-outline-primary px-4",disabled:o.status.loadingItem===e.id,onClick:d=>o.addCart(e.id)},[o.status.loadingItem===e.id?(n(),r("div",ut,s[7]||(s[7]=[t("span",{class:"visually-hidden"},"Loading...",-1)]))):l("",!0),s[8]||(s[8]=t("i",{class:"bi bi-cart-fill"},null,-1)),s[9]||(s[9]=b(" 加入購物車 "))],8,bt),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:o.status.loadingItem===e.id,onClick:d=>o.removeFavorite(e)},s[10]||(s[10]=[t("i",{class:"bi bi-trash"},null,-1)]),8,vt)])]))),128))]),t("div",pt,[p(c,{class:"btn btn-primary hover-btn",to:"/cart"},{default:f(()=>s[11]||(s[11]=[b(" 前往購物車"),t("i",{class:"bi bi-cart-fill ps-1"},null,-1)])),_:1})])],64)):(n(),r("div",ft,[s[14]||(s[14]=t("h2",{class:"fw-bold mb-5"},"您尚未有行程加入我的最愛",-1)),p(c,{class:"btn btn-primary btn-lg fw-bold",to:"/products/全部"},{default:f(()=>s[13]||(s[13]=[b("馬上開始瀏覽行程吧 !")])),_:1})]))])])],64)}const kt=V(z,[["render",mt]]);export{kt as default};
