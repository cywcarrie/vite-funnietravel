import{J as P,g as i,K as S,S as r}from"./index-PNnGx-q5.js";const g={BASE_URL:"/vite-funnietravel/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funnietravel-api"},{VITE_APP_API:m,VITE_APP_PATH:A}=g,I=P("favoriteStore",()=>{const o=i(!1),u=i([]),l=i([]),t=i(JSON.parse(localStorage.getItem("favorite"))||[]);function f(){const a=`${m}api/${A}/products/all`;o.value=!0,S.get(a).then(e=>{u.value=e.data.products,s()}).catch(e=>{var c,v;const _=((v=(c=e.response)==null?void 0:c.data)==null?void 0:v.message)||"發生錯誤，請稍後再試";r("error",_)}).finally(()=>{o.value=!1})}function s(){l.value=u.value.filter(a=>t.value.indexOf(a.id)!==-1)}function d(a){o.value=!0;const e=t.value.indexOf(a);e===-1?(t.value.push(a),r("success","已加入我的最愛")):(t.value.splice(e,1),r("success","已從我的最愛移除")),n(),s(),setTimeout(()=>{o.value=!1},300)}function n(){localStorage.setItem("favorite",JSON.stringify(t.value))}function p(a){o.value=!0;const e=t.value.indexOf(a.id);e!==-1&&t.value.splice(e,1),n(),s(),o.value=!1,r("success","已從我的最愛移除")}return{isLoading:o,products:u,favoriteProduct:l,favoriteData:t,getProducts:f,getFavorite:s,addFavorite:d,setStorage:n,removeFavorite:p}});export{I as u};
