import{_ as M,k as j,s as U,g as c,f as z,l as F,m as G,c as d,d as w,a as t,w as D,n as v,b as r,i as q,p as J,q as K,t as i,F as E,x as Q,y as W,S,r as T,o as g,z as x,j as X,u as Y}from"./index-CryKrSl-.js";import{P as Z}from"./PaginationComponent-BgNCQ7VZ.js";import{V as $}from"./VueLoading-BwiBs25a.js";const tt={全部:{name:"全部",describe:"東南亞熱門旅遊的四個國家，泰國、新加坡、馬來西亞、印尼 (峇里島)。",img:"https://i.imgur.com/L80I6O1.jpg"},峇里島:{name:"峇里島",describe:"是集東南亞神話、藝術、夢幻於一身的南洋島國，也是很熱門的度假勝地。",img:"https://i.imgur.com/r7xGPuL.jpg",badge1:"海島輕旅行",badge2:"自在島日子",badge3:"一生必去"},泰國:{name:"泰國",describe:"擁有「東方威尼斯」美譽的曼谷與被稱為泰國黃金海岸的度假勝地 - 芭達雅。",img:"https://i.imgur.com/r7xGPuL.jpg",badge1:"玩轉微笑國",badge2:"吃逛不設限",badge3:"人氣首選"},新加坡:{name:"新加坡",describe:"是東南亞最美麗的花園城市，也是東南亞治安最好的國際都會城市。",img:"https://i.imgur.com/C76pr82.jpg",badge1:"探索花園城",badge2:"輕鬆走透透",badge3:"食尚探索"},馬來西亞:{name:"馬來西亞",describe:"吉隆坡是一座新舊輝映、東方色彩與西方文明有機融合的新興大都市。",img:"https://i.imgur.com/L80I6O1.jpg",badge1:"品味真亞洲",badge2:"自由輕旅行",badge3:"文化之旅"}},ot={BASE_URL:"/vite-funnietravel/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funnietravel-api"},{VITE_APP_API:et,VITE_APP_PATH:st}=ot,at={components:{VueLoading:$,Pagination:Z},setup(){const m=X("$axios"),o=W(),P=Y(),{addCart:e}=j(),{isDone:I}=U(j()),L=c({}),p=c([]),l=c(o.params.category||""),h=c(tt),s=c("價格"),y=c({}),k=c(!1),A=z({loadingItem:""});function C(a=1){k.value=!0;const _=`${et}api/${st}/products/all`;m.get(_).then(n=>{if(n.data.success){let u=n.data.products;l.value&&l.value!=="全部"&&(u=u.filter(B=>B.category===l.value));const b=6,f=Math.ceil(u.length/b),H=(a-1)*b,O=a*b;p.value=u.slice(H,O),y.value={current_page:a,has_next:a<f,has_pre:a>1,total_pages:f},V()}else S("error",n.data.message||"無法取得產品資料")}).catch(n=>{var b,f;const u=((f=(b=n.response)==null?void 0:b.data)==null?void 0:f.message)||"發生錯誤，請稍後再試";S("error",u)}).finally(()=>{k.value=!1})}function N(a){P.push(`/products/${a}`)}function R(a){P.push(`/product/${a}`)}function V(){let a="";p.value.sort((_,n)=>s.value==="priceLowToHigh"?a=_.price-n.price:s.value==="priceHighToLow"?a=n.price-_.price:a)}return F(()=>o.params.category,a=>{o.name==="products"&&(l.value=a,C())}),G(()=>{C()}),{product:L,products:p,category:l,categoryIntro:h,selectPrice:s,pagination:y,isLoading:k,status:A,getProducts:C,goToCategory:N,getProduct:R,sortedProducts:V,addCart:e,isDone:I}}},it={class:"mb-5"},rt={class:"container"},lt={"aria-label":"breadcrumb",style:{"--bs-breadcrumb-divider":"'>'"},class:"mt-3 mb-md-4 d-flex justify-content-start"},nt={class:"breadcrumb"},ct={class:"breadcrumb-item"},dt={class:"row my-5"},gt={class:"col-lg-3 mb-4 mb-lg-0"},ut={class:"list-group text-start"},bt={class:"d-flex align-items-center flex-nowrap ms-auto mt-3"},mt={class:"col-lg-9"},pt={class:"row mb-3 mb-lg-4"},ft={class:"col-12"},vt={class:"text-white fw-bolder fs-1 pt-4 ps-4"},yt={class:"text-white fw-bolder fs-5 px-4"},_t={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3"},wt={class:"card product-card w-100 h-100"},xt=["onClick"],Pt=["src"],ht={class:"category-text d-flex justify-content-start align-items-start text-white p-3 fw-bold"},kt={class:"card-body p-3"},Ct={class:"card-title fw-bolder mb-2 text-primary"},Tt={class:"d-flex align-items-center mb-3 gap-2"},It={class:"badge text-bg-light p-2 rounded-pill text-nowrap"},Lt={class:"badge text-bg-light p-2 rounded-pill text-nowrap"},Vt={class:"badge text-bg-light p-2 rounded-pill text-nowrap"},jt={class:"d-flex justify-content-between align-items-center mb-3"},Dt={key:0,class:"h5 text-black-50"},Et={key:1,class:"h6 text-black-50"},St={key:2,class:"h5 text-danger fw-bold"},At={class:"card-footer border-0 bg-transparent pt-0 pb-3"},Nt=["disabled","onClick"],Rt={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"};function Ht(m,o,P,e,I,L){const p=T("VueLoading"),l=T("RouterLink"),h=T("Pagination");return g(),d(E,null,[w(p,{active:e.isLoading},null,8,["active"]),o[21]||(o[21]=t("div",{class:"my-5 position-relative banner container-fluid",style:{background:"linear-gradient(to right, #90afc5, #336b87)"}},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title fs-2"},"行程列表")],-1)),t("section",it,[t("div",rt,[t("nav",lt,[t("ol",nt,[t("li",ct,[w(l,{to:"/",class:"text-dark hover-nav fw-bold"},{default:D(()=>o[7]||(o[7]=[r("首頁")])),_:1})]),o[8]||(o[8]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"行程列表",-1))])]),t("div",dt,[t("div",gt,[t("div",ut,[t("button",{type:"button",class:v(["list-group-item list-group-item-action fw-bold",{active:e.category==="全部"}]),"aria-current":"true",onClick:o[0]||(o[0]=s=>e.goToCategory("全部"))},o[9]||(o[9]=[t("i",{class:"bi bi-globe me-2"},null,-1),r(" 全部 ")]),2),t("button",{type:"button",class:v(["list-group-item list-group-item-action fw-bold",{active:e.category==="峇里島"}]),onClick:o[1]||(o[1]=s=>e.goToCategory("峇里島"))},o[10]||(o[10]=[t("i",{class:"bi bi-globe me-2"},null,-1),r(" 峇里島 ")]),2),t("button",{type:"button",class:v(["list-group-item list-group-item-action fw-bold",{active:e.category==="泰國"}]),onClick:o[2]||(o[2]=s=>e.goToCategory("泰國"))},o[11]||(o[11]=[t("i",{class:"bi bi-globe me-2"},null,-1),r(" 泰國 ")]),2),t("button",{type:"button",class:v(["list-group-item list-group-item-action fw-bold",{active:e.category==="新加坡"}]),onClick:o[3]||(o[3]=s=>e.goToCategory("新加坡"))},o[12]||(o[12]=[t("i",{class:"bi bi-globe me-2"},null,-1),r(" 新加坡 ")]),2),t("button",{type:"button",class:v(["list-group-item list-group-item-action fw-bold",{active:e.category==="馬來西亞"}]),onClick:o[4]||(o[4]=s=>e.goToCategory("馬來西亞"))},o[13]||(o[13]=[t("i",{class:"bi bi-globe me-2"},null,-1),r(" 馬來西亞 ")]),2)]),t("div",bt,[o[15]||(o[15]=t("label",{class:"me-2 mb-0 text-nowrap"},"排序：",-1)),q(t("select",{class:"form-select fw-bold text-primary","aria-label":"Default select example","onUpdate:modelValue":o[5]||(o[5]=s=>e.selectPrice=s),onChange:o[6]||(o[6]=s=>e.sortedProducts())},o[14]||(o[14]=[t("option",{selected:"",disabled:"",class:"fw-bold"},"價格",-1),t("option",{value:"priceLowToHigh",class:"fw-bold"},"由低至高",-1),t("option",{value:"priceHighToLow",class:"fw-bold"},"由高至低",-1)]),544),[[J,e.selectPrice]])])]),t("div",mt,[t("div",pt,[t("div",ft,[t("div",{class:"rounded products-all",style:K(`
              background-image: linear-gradient(rgba(0,0,0,0.3),rgba(0,0,0,0.3)),
              url(${e.categoryIntro[e.category].img});`)},[t("h2",vt,i(e.category),1),t("p",yt,i(e.categoryIntro[e.category].describe),1)],4)])]),t("div",_t,[(g(!0),d(E,null,Q(e.products,s=>(g(),d("div",{class:"col mb-4",key:`product-${s.id}`},[t("div",wt,[w(l,{class:"",to:`/product/${s.id}`},{default:D(()=>[t("div",{class:"product-img cursor-pointer",onClick:y=>e.getProduct(s.id)},[t("img",{src:s.imageUrl,class:"card-img-top object-fit-cover",alt:"allProuctsImages"},null,8,Pt),t("span",ht,[o[16]||(o[16]=t("i",{class:"bi bi-globe pe-2"},null,-1)),r(" "+i(s.category),1)])],8,xt),t("div",kt,[t("h5",Ct,i(s.title),1),t("div",Tt,[t("small",It,i(e.categoryIntro[s.category].badge1),1),t("small",Lt,i(e.categoryIntro[s.category].badge2),1),t("small",Vt,i(e.categoryIntro[s.category].badge3),1)]),t("div",jt,[s.price?x("",!0):(g(),d("div",Dt," NTD "+i(m.$format.currency(s.origin_price)),1)),s.price?(g(),d("del",Et,"NTD "+i(m.$format.currency(s.origin_price)),1)):x("",!0),s.price?(g(),d("div",St,[o[17]||(o[17]=t("small",{class:"text-body-secondary"},"NTD",-1)),r(" "+i(m.$format.currency(s.price)),1)])):x("",!0)])])]),_:2},1032,["to"]),t("div",At,[t("button",{type:"button",class:"btn btn-outline-primary w-100",disabled:e.status.loadingItem===s.id,onClick:y=>e.addCart(s.id)},[e.status.loadingItem===s.id?(g(),d("div",Rt,o[18]||(o[18]=[t("span",{class:"visually-hidden"},"Loading...",-1)]))):x("",!0),o[19]||(o[19]=t("i",{class:"bi bi-cart-fill"},null,-1)),o[20]||(o[20]=r(" 加入購物車 "))],8,Nt)])])]))),128))]),w(h,{pages:e.pagination,onEmitPages:e.getProducts},null,8,["pages","onEmitPages"])])])])])],64)}const Ut=M(at,[["render",Ht]]);export{Ut as default};
