import{_ as L,k as x,s as q,g as U,m as N,c as a,d as u,a as t,w as b,b as e,F as m,x as C,i as f,v as _,t as d,z as h,r as w,o as r}from"./index-BMKnvvao.js";import{V as A}from"./VueLoading-DbF5Y1Mv.js";const B={components:{VueLoading:A},setup(){const{getCart:i,updateCart:o,removeCartItem:v,deleteAllCart:n,getProduct:y,addCouponCode:g,copyCouponCode:p}=x(),{carts:c,total:s,final_total:l,cart:k,isLoading:V}=q(x()),j=U("");return N(()=>{i()}),{carts:c,total:s,final_total:l,cart:k,isLoading:V,coupon_code:j,getCart:i,updateCart:o,removeCartItem:v,deleteAllCart:n,getProduct:y,addCouponCode:g,copyCouponCode:p}}},I={class:"cart-section mb-5"},P={class:"container"},R={"aria-label":"breadcrumb",style:{"--bs-breadcrumb-divider":"'>'"},class:"mt-3 mb-4 d-flex justify-content-start"},T={class:"breadcrumb"},D={class:"breadcrumb-item"},F={key:0,class:"row g-4"},M={class:"col-lg-8"},S={class:"d-flex flex-column flex-md-row justify-content-between gap-3 mb-3"},z={class:"bg-light p-3 shadow-sm rounded-4 d-none d-lg-block"},E={class:"table-responsive overflow-x-hidden"},G={class:"table align-middle text-center table-light table-borderless cart-table"},H=["onClick"],J={class:"text-wrap"},K={class:"d-flex justify-content-center"},O={class:"input-group input-group-sm cart-qty"},Q=["onChange","onUpdate:modelValue"],W={class:"input-group-text"},X={class:"text-end text-nowrap"},Y={class:"text-end text-nowrap"},Z={key:0,class:"text-success"},$=["onClick"],tt={class:"d-block d-lg-none"},ot=["onClick"],st={class:"mt-3 mb-2 d-flex justify-content-end"},nt={class:"input-group input-group-sm cart-qty"},et=["onChange","onUpdate:modelValue"],lt={class:"input-group-text"},at={class:"d-flex justify-content-between align-items-center"},rt={class:"text-end text-nowrap"},dt={key:0,class:"text-success"},it={key:1},ct={class:"d-flex justify-content-end align-items-center mt-3"},ut=["onClick"],bt={class:"col-lg-4"},pt={class:"bg-light p-4 rounded-4 shadow-sm h-100 d-flex flex-column justify-content-between"},mt={class:"input-group mb-3"},ft={class:"mt-4"},_t={class:"d-flex justify-content-between"},vt={class:"fs-5 fw-bold text-primary"},yt={key:0,class:"d-flex justify-content-between text-success mt-2"},gt={class:"fs-6 fw-bold"},xt={key:1,class:"py-5 mb-5 text-center"};function Ct(i,o,v,n,y,g){const p=w("VueLoading"),c=w("RouterLink");return r(),a(m,null,[u(p,{active:n.isLoading},null,8,["active"]),o[20]||(o[20]=t("div",{class:"my-5 position-relative banner container-fluid",style:{background:"linear-gradient(to right, #90afc5, #336b87)"}},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title fs-2"},"購物車")],-1)),t("section",I,[t("div",P,[t("nav",R,[t("ol",T,[t("li",D,[u(c,{to:"/",class:"text-dark hover-nav fw-bold"},{default:b(()=>o[4]||(o[4]=[e("首頁")])),_:1})]),o[5]||(o[5]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1))])]),n.cart.total!==0?(r(),a("div",F,[t("div",M,[o[10]||(o[10]=t("div",{class:"text-center mb-5"},[t("h2",{class:"fw-bold text-dark"},"購物車清單")],-1)),t("div",S,[u(c,{class:"btn btn-outline-primary",to:"/products/全部"},{default:b(()=>o[6]||(o[6]=[t("i",{class:"bi bi-cart pe-1"},null,-1),e(" 繼續選購 ")])),_:1}),t("button",{type:"button",class:"btn btn-outline-danger",onClick:o[0]||(o[0]=(...s)=>n.deleteAllCart&&n.deleteAllCart(...s))},o[7]||(o[7]=[t("i",{class:"bi bi-trash3 pe-1"},null,-1),e(" 清空購物車 ")]))]),t("div",z,[t("div",E,[t("table",G,[o[9]||(o[9]=t("thead",{class:"table-secondary"},[t("tr",null,[t("th",null,"行程名稱"),t("th",null,"數量"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計"),t("th")])],-1)),t("tbody",null,[(r(!0),a(m,null,C(n.cart.carts,s=>(r(),a("tr",{key:s.id},[t("td",{class:"text-primary fw-bold cursor-pointer hover-nav",onClick:l=>n.getProduct(s.product_id)},[t("span",J,d(s.product.title),1)],8,H),t("td",null,[t("div",K,[t("div",O,[f(t("input",{type:"number",class:"form-control",min:"1",onChange:l=>n.updateCart(s),"onUpdate:modelValue":l=>s.qty=l},null,40,Q),[[_,s.qty,void 0,{number:!0}]]),t("div",W,"/ "+d(s.product.unit),1)])])]),t("td",X,d(i.$format.currency(s.product.price)),1),t("td",Y,[n.cart.final_total!==n.cart.total?(r(),a("small",Z,"優惠價：")):h("",!0),e(" "+d(i.$format.currency(s.final_total)),1)]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>n.removeCartItem(s.id)},o[8]||(o[8]=[t("i",{class:"bi bi-trash"},null,-1)]),8,$)])]))),128))])])])])]),t("div",tt,[(r(!0),a(m,null,C(n.cart.carts,s=>(r(),a("div",{class:"bg-white p-3 shadow-sm rounded-4 mb-3",key:s.id},[t("div",{class:"text-primary fw-bold cursor-pointer hover-nav mb-1",onClick:l=>n.getProduct(s.product_id)},d(s.product.title),9,ot),t("div",st,[t("div",nt,[f(t("input",{type:"number",class:"form-control",min:"1",onChange:l=>n.updateCart(s),"onUpdate:modelValue":l=>s.qty=l},null,40,et),[[_,s.qty,void 0,{number:!0}]]),t("div",lt,"/ "+d(s.product.unit),1)])]),t("div",at,[t("div",rt,[o[11]||(o[11]=t("small",null,"單價：",-1)),e(d(i.$format.currency(s.product.price)),1)]),t("div",null,[n.cart.final_total!==n.cart.total?(r(),a("small",dt,"優惠價：")):(r(),a("small",it,"小計：")),e(" "+d(i.$format.currency(s.final_total)),1)])]),t("div",ct,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>n.removeCartItem(s.id)},o[12]||(o[12]=[t("i",{class:"bi bi-trash pe-1"},null,-1),e("刪除 ")]),8,ut)])]))),128))]),t("div",bt,[t("div",pt,[t("div",null,[o[14]||(o[14]=t("div",{class:"text-dark fw-bold mb-3"},[t("i",{class:"bi bi-globe pe-2"}),e(" 結帳前輸入優惠碼 「"),t("span",{class:"text-primary"},"funnietravel"),e("」，即可享有 "),t("span",{class:"text-primary"},"85"),e(" 折優惠 ")],-1)),t("button",{onClick:o[1]||(o[1]=(...s)=>n.copyCouponCode&&n.copyCouponCode(...s)),class:"btn btn-outline-primary w-100 mb-3",type:"button"},o[13]||(o[13]=[t("i",{class:"bi bi-clipboard-fill pe-1"},null,-1),e(" 複製優惠碼 ")]))]),t("div",mt,[f(t("input",{type:"text",class:"form-control border-primary","onUpdate:modelValue":o[2]||(o[2]=s=>n.coupon_code=s),placeholder:"請輸入優惠碼"},null,512),[[_,n.coupon_code]]),t("button",{class:"btn btn-primary",type:"button",onClick:o[3]||(o[3]=s=>n.addCouponCode(n.coupon_code))}," 套用 ")]),t("div",ft,[t("div",_t,[o[15]||(o[15]=t("span",{class:"fs-5"},"總計",-1)),t("span",vt,d(i.$format.currency(n.cart.total)),1)]),n.cart.final_total!==n.cart.total?(r(),a("div",yt,[o[16]||(o[16]=t("span",{class:"fs-6"},"優惠價",-1)),t("span",gt,d(i.$format.currency(n.cart.final_total)),1)])):h("",!0),u(c,{to:"/checkout",class:"btn btn-primary w-100 mt-4"},{default:b(()=>o[17]||(o[17]=[e(" 前往結帳 "),t("i",{class:"bi bi-caret-right-fill"},null,-1)])),_:1})])])])])):(r(),a("div",xt,[o[19]||(o[19]=t("h2",{class:"fw-bolder mb-5"},"您尚未有行程加入購物車",-1)),u(c,{class:"btn btn-primary btn-lg fw-bold",to:"/products/全部"},{default:b(()=>o[18]||(o[18]=[e(" 馬上開始選購吧 ! ")])),_:1})]))])])],64)}const kt=L(B,[["render",Ct]]);export{kt as default};
