import{_ as j,k as v,s as L,g as N,m as U,c as n,d as b,a as t,w as p,F as m,b as r,x as q,t as u,z as d,i as C,v as g,e as A,r as w,o as l}from"./index-DzYaN0Ue.js";import{V as B}from"./VueLoading-BF7w9hld.js";const R={components:{VueLoading:B},setup(){const{getCart:a,updateCart:s,removeCartItem:y,deleteAllCart:o,getProduct:_,addCouponCode:x,copyCouponCode:f}=v(),{carts:i,total:e,final_total:c,cart:k,isLoading:h}=L(v()),V=N("");return U(()=>{a()}),{carts:i,total:e,final_total:c,cart:k,isLoading:h,coupon_code:V,getCart:a,updateCart:s,removeCartItem:y,deleteAllCart:o,getProduct:_,addCouponCode:x,copyCouponCode:f}}},S={class:"mb-5"},T={class:"container"},D={"aria-label":"breadcrumb",style:{"--bs-breadcrumb-divider":"'>'"},class:"mt-3 mb-md-4 d-flex justify-content-start"},F={class:"breadcrumb"},I={class:"breadcrumb-item"},M={class:"d-flex justify-content-between mt-4"},P={class:"row mt-4 mb-5 bg-light rounded-2 py-3"},z={class:"col table-responsive mt-4 mb-4"},E={class:"table align-middle text-center table-light table-borderless"},G={class:"text-center"},H=["onClick"],J={key:0,class:"text-success"},K={class:"text-nowrap"},O={class:"d-flex justify-content-center"},Q={class:"input-group input-group-sm cart-qty"},W=["onChange","onUpdate:modelValue"],X={class:"input-group-text"},Y={class:"text-end text-nowrap"},Z={class:"text-end text-nowrap"},$={key:0,class:"text-success"},tt=["onClick"],st={class:"text-end fs-4 text-primary fw-bold"},ot={key:0},et={class:"text-end text-success fs-4 fw-bold"},nt={class:"d-flex justify-content-end align-items-center"},lt={key:0,class:"input-group mb-3 coupon-input"},at={class:"d-flex justify-content-end align-items-center mb-4"},rt={key:0,class:"text-end mt-4 mb-4"},dt={key:1,class:"py-5 mb-5"},it={class:"text-center pt-4"};function ct(a,s,y,o,_,x){const f=w("VueLoading"),i=w("RouterLink");return l(),n(m,null,[b(f,{active:o.isLoading},null,8,["active"]),s[18]||(s[18]=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"購物車")],-1)),t("section",S,[t("div",T,[t("nav",D,[t("ol",F,[t("li",I,[b(i,{to:"/",class:"text-dark hover-nav fw-bold"},{default:p(()=>s[4]||(s[4]=[r("首頁")])),_:1})]),s[5]||(s[5]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1))])]),o.cart.total!==0?(l(),n(m,{key:0},[s[15]||(s[15]=t("div",{class:"d-flex justify-content-center mt-5"},[t("h2",{class:"fw-bold"},"購物車清單")],-1)),t("div",M,[b(i,{class:"btn btn-outline-primary",to:"/products/全部"},{default:p(()=>s[6]||(s[6]=[t("i",{class:"bi bi-cart pe-1"},null,-1),r("繼續選購")])),_:1}),t("button",{type:"button",class:"btn btn-outline-danger",onClick:s[0]||(s[0]=(...e)=>o.deleteAllCart&&o.deleteAllCart(...e))},s[7]||(s[7]=[t("i",{class:"bi bi-trash3 pe-1"},null,-1),r("清空購物車 ")]))]),t("div",P,[t("div",z,[t("table",E,[s[11]||(s[11]=t("thead",{class:"table-secondary"},[t("tr",{class:"table-nowrap"},[t("th",{class:"text-nowrap"},"行程名稱"),t("th",{class:"text-nowrap"},"數量"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計"),t("th",{class:"text-end"})])],-1)),t("tbody",G,[(l(!0),n(m,null,q(o.cart.carts,e=>(l(),n("tr",{class:"table-nowrap",key:e.id},[t("td",{class:"text-nowrap fw-bold text-primary cursor-pointer hover-nav",onClick:c=>o.getProduct(e.product_id)},[r(u(e.product.title)+" ",1),e.coupon?(l(),n("div",J,"已套用優惠券")):d("",!0)],8,H),t("td",K,[t("div",O,[t("div",Q,[C(t("input",{type:"number",class:"form-control",min:"1",onChange:c=>o.updateCart(e),"onUpdate:modelValue":c=>e.qty=c},null,40,W),[[g,e.qty,void 0,{number:!0}]]),t("div",X,"/ "+u(e.product.unit),1)])])]),t("td",Y,u(a.$format.currency(e.product.price)),1),t("td",Z,[o.cart.final_total!==o.cart.total?(l(),n("small",$,"優惠價：")):d("",!0),r(" "+u(a.$format.currency(e.final_total)),1)]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:c=>o.removeCartItem(e.id)},s[8]||(s[8]=[t("i",{class:"bi bi-trash"},null,-1)]),8,tt)])]))),128))]),t("tfoot",null,[t("tr",null,[s[9]||(s[9]=t("td",{colspan:"3",class:"text-end fs-4"},"總計",-1)),t("td",st,u(a.$format.currency(o.cart.total)),1)]),o.cart.final_total!==o.cart.total?(l(),n("tr",ot,[s[10]||(s[10]=t("td",{colspan:"3",class:"text-end text-success fs-4"},"優惠價",-1)),t("td",et,u(a.$format.currency(o.cart.final_total)),1)])):d("",!0)])])]),t("div",nt,[o.cart.total!==0?(l(),n("div",lt,[C(t("input",{type:"text",class:"form-control border-primary","onUpdate:modelValue":s[1]||(s[1]=e=>o.coupon_code=e),placeholder:"請輸入優惠碼"},null,512),[[g,o.coupon_code]]),t("button",{class:"btn btn-outline-primary",type:"button",onClick:s[2]||(s[2]=e=>o.addCouponCode(o.coupon_code))}," 套用優惠碼 ")])):d("",!0)]),s[14]||(s[14]=A('<div class="d-flex justify-content-end align-items-center mb-2"><div class="fs-6 fw-bold text-primary"><i class="bi bi-globe pe-2"></i>輸入優惠碼 <span class="fs-5 fw-bold text-secondary">funnietravel</span> 即享 <span class="fs-5 fw-bold text-secondary">85 </span>折優惠 </div></div>',1)),t("div",at,[t("button",{onClick:s[3]||(s[3]=(...e)=>o.copyCouponCode&&o.copyCouponCode(...e)),class:"btn btn-outline-primary",type:"button"},s[12]||(s[12]=[t("span",null,[t("i",{class:"bi bi-clipboard-fill pe-1"}),t("span",null,"複製優惠碼")],-1)]))]),o.cart.total!==0?(l(),n("div",rt,[b(i,{class:"btn btn-primary",to:"/checkout"},{default:p(()=>s[13]||(s[13]=[r("前往結帳"),t("i",{class:"bi bi-caret-right-fill"},null,-1)])),_:1})])):d("",!0)])],64)):d("",!0),o.cart.total===0?(l(),n("div",dt,[t("div",it,[s[17]||(s[17]=t("h2",{class:"fw-bolder mb-5"},"您尚未有行程加入購物車",-1)),b(i,{class:"btn btn-primary btn-lg fw-bold",to:"/products/全部"},{default:p(()=>s[16]||(s[16]=[r("馬上開始選購吧 !")])),_:1})])])):d("",!0)])])],64)}const pt=j(R,[["render",ct]]);export{pt as default};
