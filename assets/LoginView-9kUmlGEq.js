import{_ as f,f as _,g as v,c as b,d as g,a as e,h,b as w,i as p,v as m,F as x,S as l,r as V,o as P,j as y,u as E}from"./index-DzYaN0Ue.js";import{V as A}from"./VueLoading-BF7w9hld.js";const I={BASE_URL:"/vite-funnietravel/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funnietravel-api"},{VITE_APP_API:L}=I,T={components:{VueLoading:A},setup(){const i=y("$axios"),s=E(),r=_({username:"",password:""}),o=v(!1);function d(){o.value=!0;const c=`${L}admin/signin`;i.post(c,r).then(n=>{if(n.data.success){const{token:t,expired:a}=n.data;document.cookie=`hexToken=${t}; expires=${new Date(a)}; path=/`,i.defaults.headers.common.Authorization=t,l("success","登入成功"),s.push("/admin/products")}else l("error","登入失敗")}).catch(n=>{var a,u;const t=((u=(a=n.response)==null?void 0:a.data)==null?void 0:u.message)||"發生錯誤，請稍後再試";l("error",t)}).finally(()=>{o.value=!1})}return{user:r,isLoading:o,signIn:d}}},k={class:"container my-5 py-5"},S={class:"col-md-7 col-lg-4 bg-light p-5 rounded-2"},D={class:"mb-2"},B={class:"mb-2"},N={class:"text-center mt-4"},R=["disabled"];function j(i,s,r,o,d,c){const n=V("VueLoading");return P(),b(x,null,[g(n,{active:o.isLoading},null,8,["active"]),e("div",k,[e("form",{class:"row justify-content-center py-5 px-3",onSubmit:s[2]||(s[2]=h((...t)=>o.signIn&&o.signIn(...t),["prevent"]))},[e("div",S,[s[5]||(s[5]=e("h2",{class:"h3 mb-3 text-center text-nowrap font-weight-normal fw-bold text-primary"},[e("i",{class:"bi bi-person-circle pe-2"}),w("管理者後台登入 ")],-1)),e("div",D,[s[3]||(s[3]=e("label",{for:"inputEmail",class:"visually-hidden"},"Email",-1)),p(e("input",{type:"email",id:"inputEmail",class:"form-control",placeholder:"Email address",required:"",autofocus:"","onUpdate:modelValue":s[0]||(s[0]=t=>o.user.username=t)},null,512),[[m,o.user.username]])]),e("div",B,[s[4]||(s[4]=e("label",{for:"inputPassword",class:"visually-hidden"},"密碼",-1)),p(e("input",{type:"password",id:"inputPassword",class:"form-control",placeholder:"Password",required:"","onUpdate:modelValue":s[1]||(s[1]=t=>o.user.password=t)},null,512),[[m,o.user.password]])]),e("div",N,[e("button",{class:"btn btn-secondary btn-block px-4 fw-bold",type:"submit",disabled:o.isLoading}," 登入 ",8,R)])])],32)])],64)}const q=f(T,[["render",j]]);export{q as default};
