import{_ as w,m as _,h as m,i as x,c as n,d,a as t,w as p,F as f,b as a,l as k,t as i,p as r,f as y,v,e as h,r as C,o as l}from"./index-PAJ7suKl.js";import{V}from"./VueLoading-CJpdrcSx.js";const $={components:{VueLoading:V},data(){return{coupon_code:""}},methods:{..._(m,["getCart","updateCart","removeCartItem","deleteAllCart","getProduct","addCouponCode","copyCouponCode"])},computed:{...x(m,["carts","total","final_total","cart","isLoading"])},mounted(){this.getCart()}},j={class:"mb-5"},L={class:"container"},N={"aria-label":"breadcrumb",class:"mt-3 mb-md-4 d-flex justify-content-start"},A={class:"breadcrumb"},S={class:"breadcrumb-item"},U={class:"d-flex justify-content-between mt-4"},q={class:"row mt-4 mb-5 bg-light rounded-2 py-3"},B={class:"col table-responsive mt-4 mb-4"},D={class:"table align-middle text-center table-light table-borderless"},F={class:"text-center"},I=["onClick"],P={key:0,class:"text-success"},R={class:"text-nowrap"},T={class:"d-flex justify-content-center"},E={class:"input-group input-group-sm cart-qty"},M=["onChange","onUpdate:modelValue"],z={class:"input-group-text"},G={class:"text-end text-nowrap"},H={class:"text-end text-nowrap"},J={key:0,class:"text-success"},K=["onClick"],O={class:"text-end fs-4 text-primary fw-bold"},Q={key:0},W={class:"text-end text-success fs-4 fw-bold"},X={class:"d-flex justify-content-end align-items-center"},Y={key:0,class:"input-group mb-3 coupon-input"},Z={class:"d-flex justify-content-end align-items-center mb-4"},tt={key:0,class:"text-end mt-4 mb-4"},st={key:1,class:"py-5 mb-5"},et={class:"text-center pt-4"};function ot(e,s,nt,lt,b,at){const g=C("VueLoading"),c=C("RouterLink");return l(),n(f,null,[d(g,{active:e.isLoading},null,8,["active"]),s[18]||(s[18]=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"購物車")],-1)),t("section",j,[t("div",L,[t("nav",N,[t("ol",A,[t("li",S,[d(c,{to:"/",class:"text-dark hover-nav fw-bold"},{default:p(()=>s[4]||(s[4]=[a("首頁")])),_:1})]),s[5]||(s[5]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1))])]),e.cart.total!==0?(l(),n(f,{key:0},[s[15]||(s[15]=t("div",{class:"d-flex justify-content-center mt-5"},[t("h2",{class:"fw-bold"},"購物車清單")],-1)),t("div",U,[d(c,{class:"btn btn-outline-primary",to:"/products/全部"},{default:p(()=>s[6]||(s[6]=[t("i",{class:"bi bi-cart pe-1"},null,-1),a("繼續選購")])),_:1}),t("button",{type:"button",class:"btn btn-outline-danger",onClick:s[0]||(s[0]=(...o)=>e.deleteAllCart&&e.deleteAllCart(...o))},s[7]||(s[7]=[t("i",{class:"bi bi-trash3 pe-1"},null,-1),a("清空購物車 ")]))]),t("div",q,[t("div",B,[t("table",D,[s[11]||(s[11]=t("thead",{class:"table-secondary"},[t("tr",{class:"table-nowrap"},[t("th",{class:"text-nowrap"},"行程名稱"),t("th",{class:"text-nowrap"},"數量"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計"),t("th",{class:"text-end"})])],-1)),t("tbody",F,[(l(!0),n(f,null,k(e.cart.carts,o=>(l(),n("tr",{class:"table-nowrap",key:o.id},[t("td",{class:"text-nowrap fw-bold text-primary cursor-pointer hover-nav",onClick:u=>e.getProduct(o.product_id)},[a(i(o.product.title)+" ",1),o.coupon?(l(),n("div",P,"已套用優惠券")):r("",!0)],8,I),t("td",R,[t("div",T,[t("div",E,[y(t("input",{type:"number",class:"form-control",min:"1",onChange:u=>e.updateCart(o),"onUpdate:modelValue":u=>o.qty=u},null,40,M),[[v,o.qty,void 0,{number:!0}]]),t("div",z,"/ "+i(o.product.unit),1)])])]),t("td",G,i(e.$filters.currency(o.product.price)),1),t("td",H,[e.cart.final_total!==e.cart.total?(l(),n("small",J,"優惠價：")):r("",!0),a(" "+i(e.$filters.currency(o.final_total)),1)]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:u=>e.removeCartItem(o.id)},s[8]||(s[8]=[t("i",{class:"bi bi-trash"},null,-1)]),8,K)])]))),128))]),t("tfoot",null,[t("tr",null,[s[9]||(s[9]=t("td",{colspan:"3",class:"text-end fs-4"},"總計",-1)),t("td",O,i(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(l(),n("tr",Q,[s[10]||(s[10]=t("td",{colspan:"3",class:"text-end text-success fs-4"},"優惠價",-1)),t("td",W,i(e.$filters.currency(e.cart.final_total)),1)])):r("",!0)])])]),t("div",X,[e.cart.total!==0?(l(),n("div",Y,[y(t("input",{type:"text",class:"form-control border-primary","onUpdate:modelValue":s[1]||(s[1]=o=>b.coupon_code=o),placeholder:"請輸入優惠碼"},null,512),[[v,b.coupon_code]]),t("button",{class:"btn btn-outline-primary",type:"button",onClick:s[2]||(s[2]=o=>e.addCouponCode(b.coupon_code))}," 套用優惠碼 ")])):r("",!0)]),s[14]||(s[14]=h('<div class="d-flex justify-content-end align-items-center mb-2"><div class="fs-6 fw-bold text-primary"><i class="bi bi-globe pe-2"></i>輸入優惠碼 <span class="fs-5 fw-bold text-secondary">funnietravel</span> 即享 <span class="fs-5 fw-bold text-secondary">85 </span>折優惠 </div></div>',1)),t("div",Z,[t("button",{onClick:s[3]||(s[3]=(...o)=>e.copyCouponCode&&e.copyCouponCode(...o)),class:"btn btn-outline-primary",type:"button"},s[12]||(s[12]=[t("span",null,[t("i",{class:"bi bi-clipboard-fill pe-1"}),t("span",null,"複製優惠碼")],-1)]))]),e.cart.total!==0?(l(),n("div",tt,[d(c,{class:"btn btn-primary",to:"/checkout"},{default:p(()=>s[13]||(s[13]=[a("前往結帳"),t("i",{class:"bi bi-caret-right-fill"},null,-1)])),_:1})])):r("",!0)])],64)):r("",!0),e.cart.total===0?(l(),n("div",st,[t("div",et,[s[17]||(s[17]=t("h2",{class:"fw-bolder mb-5"},"您尚未有行程加入購物車",-1)),d(c,{class:"btn btn-primary btn-lg fw-bold",to:"/products/全部"},{default:p(()=>s[16]||(s[16]=[a("馬上開始選購吧 !")])),_:1})])])):r("",!0)])])],64)}const dt=w($,[["render",ot]]);export{dt as default};
