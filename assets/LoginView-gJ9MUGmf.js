import{_ as f,f as _,g as v,c as b,d as g,a as s,h,b as x,i as p,v as m,F as w,S as l,r as V,o as y,j as P,u as E}from"./index-CR4YrC3H.js";import{V as A}from"./VueLoading-lznmsfOi.js";const I={BASE_URL:"/vite-funnietravel/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funnietravel-api"},{VITE_APP_API:L}=I,T={components:{VueLoading:A},setup(){const i=P("$axios"),e=E(),r=_({username:"",password:""}),o=v(!1);function d(){o.value=!0;const c=`${L}admin/signin`;i.post(c,r).then(n=>{if(n.data.success){const{token:t,expired:a}=n.data;document.cookie=`hexToken=${t}; expires=${new Date(a)}; path=/`,i.defaults.headers.common.Authorization=t,l("success","登入成功"),e.push("/admin/products")}else l("error","登入失敗")}).catch(n=>{var a,u;const t=((u=(a=n.response)==null?void 0:a.data)==null?void 0:u.message)||"發生錯誤，請稍後再試";l("error",t)}).finally(()=>{o.value=!1})}return{user:r,isLoading:o,signIn:d}}},k={class:"container my-5 py-5"},S={class:"col-md-7 col-lg-4 bg-light p-5 rounded-2"},D={class:"mb-2"},B={class:"mb-2"},N={class:"text-center mt-4"},R=["disabled"];function j(i,e,r,o,d,c){const n=V("VueLoading");return y(),b(w,null,[g(n,{active:o.isLoading},null,8,["active"]),s("div",k,[s("form",{class:"row justify-content-center py-5 px-3",onSubmit:e[2]||(e[2]=h((...t)=>o.signIn&&o.signIn(...t),["prevent"]))},[s("div",S,[e[5]||(e[5]=s("h2",{class:"h3 mb-3 text-center text-nowrap font-weight-normal fw-bold text-primary"},[s("i",{class:"bi bi-person-circle pe-2"}),x("管理者後台登入 ")],-1)),s("div",D,[e[3]||(e[3]=s("label",{for:"inputEmail",class:"visually-hidden"},"Email",-1)),p(s("input",{type:"email",id:"inputEmail",class:"form-control",placeholder:"電子郵件地址",required:"",autofocus:"","onUpdate:modelValue":e[0]||(e[0]=t=>o.user.username=t)},null,512),[[m,o.user.username]])]),s("div",B,[e[4]||(e[4]=s("label",{for:"inputPassword",class:"visually-hidden"},"密碼",-1)),p(s("input",{type:"password",id:"inputPassword",class:"form-control",placeholder:"密碼",required:"","onUpdate:modelValue":e[1]||(e[1]=t=>o.user.password=t)},null,512),[[m,o.user.password]])]),s("div",N,[s("button",{class:"btn btn-primary btn-block px-4 fw-bold",type:"submit",disabled:o.isLoading}," 登入 ",8,R)])])],32)])],64)}const q=f(T,[["render",j]]);export{q as default};
