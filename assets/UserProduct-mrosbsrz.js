import{_ as A,A as C,m as S,o,c as i,h as E,g as _,k as R,s as P,l as q,d as g,a as e,w as T,t as l,b as c,B as M,z as u,e as j,i as U,v as H,F as k,x as O,y as z,S as F,r as y,j as W,u as G}from"./index-Cwm0lMTx.js";import{u as D}from"./favoriteStore-DkB8tqru.js";import{V as J}from"./VueLoading-BkvJ_KJW.js";import{S as K}from"./SwiperComponent-CP-X2tgD.js";const Q={props:{productFavoriteId:{type:[String,Number]}},setup(r){const t=D(),p=C(()=>t.favoriteData.includes(r.productFavoriteId));function s(){t.addFavorite(r.productFavoriteId)}return S(()=>{t.getFavorite()}),{isFavorite:p,toggleFavorite:s}}},X={key:0,class:"bi bi-heart text-primary fs-3"},Y={key:1,class:"bi bi-heart-fill text-primary fs-3"};function Z(r,t,p,s,x,d){return o(),i("a",{href:"#",title:"我的最愛",onClick:t[0]||(t[0]=E(n=>s.toggleFavorite(),["prevent"])),class:"ps-3 ps-md-0"},[s.isFavorite?(o(),i("i",Y)):(o(),i("i",X))])}const $=A(Q,[["render",Z]]),tt={BASE_URL:"/vite-funnietravel/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funnietravel-api"},{VITE_APP_API:et,VITE_APP_PATH:st}=tt,ot={components:{VueLoading:J,FavoriteBtn:$,Swiper:K},setup(){const r=W("$axios"),t=z(),p=G(),s=_({}),x=_(1),d=_(""),n=_(!1),m=R(),{cart:h}=P(m),{addCart:w}=m,a=D(),{favoriteData:N}=P(a),{addFavorite:B}=a;q(()=>t.params.productId,f=>{f!==void 0?(d.value=f,b()):F("error","無法獲取產品資訊")});function b(){const f=`${et}api/${st}/product/${d.value}`;n.value=!0,r.get(f).then(v=>{n.value=!1,v.data.success?s.value=v.data.product:(F("error","無法獲取產品資訊"),p.push("/not-found"))}).catch(v=>{var I,V;const L=((V=(I=v.response)==null?void 0:I.data)==null?void 0:V.message)||"發生錯誤，請稍後再試";F("error",L)}).finally(()=>{n.value=!1})}return S(()=>{d.value=t.params.productId,b()}),S(()=>{b()}),{product:s,qty:x,isLoading:n,id:d,favoriteData:N,cart:h,addCart:w,getProduct:b,addFavorite:B}}},it={class:"mb-5"},rt={class:"container"},at={"aria-label":"breadcrumb",style:{"--bs-breadcrumb-divider":"'>'"},class:"mt-3 mb-md-4 d-flex justify-content-start d-none d-md-block"},lt={class:"breadcrumb"},nt={class:"breadcrumb-item"},ct={class:"breadcrumb-item"},dt={class:"breadcrumb-item active","aria-current":"page"},pt={class:"row d-flex justify-content-center mb-5 mt-4 mt-md-0"},mt={class:"col-lg-5"},ut=["src"],bt={class:"col-lg-7"},ft={class:"d-flex justify-content-start text-primary fw-bold"},vt={class:"mb-2"},_t={class:"d-flex justify-content-between align-items-center"},gt={class:"m-0 fw-bold"},yt={class:"d-flex justify-content-end align-items-center"},xt={key:0,class:"h5 text-black-50"},ht={key:1,class:"h6 text-black-50"},wt={key:2,class:"h5 ms-2 text-danger fw-bold"},kt={class:"d-flex justify-content-end align-items-center"},Ft={class:"input-group mb-5 product-cart-input"},St={class:"row d-flex justify-content-center bg-light py-5 my-5 rounded-2"},It={class:"col-lg-6"},Vt={key:0,class:"mt-3 product-special-text"},Pt={class:"col-lg-6 mt-4 mt-lg-0"},Tt={class:"mt-3"},jt={class:"mt-5 bg-white"},At={class:"container"};function Dt(r,t,p,s,x,d){const n=y("VueLoading"),m=y("RouterLink"),h=y("FavoriteBtn"),w=y("Swiper");return o(),i(k,null,[g(n,{active:s.isLoading},null,8,["active"]),t[12]||(t[12]=e("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[e("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"行程資訊")],-1)),e("section",it,[e("div",rt,[e("nav",at,[e("ol",lt,[e("li",nt,[g(m,{to:"/",class:"text-dark hover-nav fw-bold"},{default:T(()=>t[2]||(t[2]=[c("首頁")])),_:1})]),e("li",ct,[g(m,{to:"/products/全部",class:"text-dark hover-nav fw-bold"},{default:T(()=>t[3]||(t[3]=[c("行程列表")])),_:1})]),e("li",dt,l(s.product.title),1)])]),e("div",pt,[e("article",mt,[e("img",{src:s.product.imageUrl,alt:"productImage",class:"img-fluid mb-3 bg-cover bg-center rounded-2"},null,8,ut)]),e("div",bt,[e("div",ft,[e("p",vt,[t[4]||(t[4]=e("i",{class:"bi bi-globe me-2"},null,-1)),c(l(s.product.category),1)])]),e("div",_t,[e("h4",gt,l(s.product.title),1),s.product.id?(o(),M(h,{key:0,productFavoriteId:s.product.id},null,8,["productFavoriteId"])):u("",!0)]),t[6]||(t[6]=j('<div class="d-flex align-items-center text-dark mt-2"><small class="border border-white bg-light px-2 py-2 rounded-pill me-2 text-nowrap">2人成行</small><small class="border border-white bg-light px-2 py-2 rounded-pill me-2 text-nowrap">贈WIFI</small><small class="border border-white bg-light px-2 py-2 rounded-pill me-2 text-nowrap">多人享優惠</small></div><div class="mt-4 text-primary"><p class="mb-2 fw-bold"><i class="bi bi-airplane-fill pe-2"></i>台北高雄皆可出發</p><p class="mb-2 fw-bold"><i class="bi bi-taxi-front-fill pe-2"></i>提供免費機場接送</p><p class="mb-2 fw-bold"><i class="bi bi-check-circle-fill pe-2"></i>可以延回或是續住</p><p class="fw-bold"><i class="bi bi-clock-fill pe-2"></i>24小時內確認訂單</p></div>',2)),e("div",yt,[s.product.price?u("",!0):(o(),i("div",xt," NTD "+l(r.$format.currency(s.product.origin_price)),1)),s.product.price?(o(),i("del",ht,"NTD "+l(r.$format.currency(s.product.origin_price)),1)):u("",!0),s.product.price?(o(),i("div",wt," NTD "+l(r.$format.currency(s.product.price)),1)):u("",!0)]),e("div",kt,[e("div",Ft,[U(e("input",{type:"number",class:"form-control border-primary","onUpdate:modelValue":t[0]||(t[0]=a=>s.qty=a),min:"1"},null,512),[[H,s.qty,void 0,{number:!0}]]),e("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=a=>s.addCart(s.product.id,s.qty))},t[5]||(t[5]=[e("i",{class:"bi bi-cart-fill pe-1"},null,-1),c("加入購物車 ")]))])])]),e("div",St,[e("div",It,[t[8]||(t[8]=e("h4",{class:"fw-bold text-primary"},[e("i",{class:"bi bi-globe pe-2"}),c("行程特色")],-1)),s.product.content?(o(),i("div",Vt,[(o(!0),i(k,null,O(s.product.content.split(`
`),a=>(o(),i(k,{key:a},[c(l(a)+" ",1),t[7]||(t[7]=e("br",null,null,-1))],64))),128))])):u("",!0)]),e("div",Pt,[t[9]||(t[9]=e("h4",{class:"fw-bold text-primary"},[e("i",{class:"bi bi-globe pe-2"}),c("行程簡介")],-1)),e("div",Tt,l(s.product.description),1)])]),t[10]||(t[10]=j('<div class="row d-flex justify-content-center bg-white py-5 mt-2 rounded-2"><div class="col-lg-6"><h4 class="fw-bold text-primary"><i class="bi bi-exclamation-circle pe-2"></i>注意事項 </h4><div class="mt-3"><p class="mb-2">1. 本行程一經售出，不得轉讓他人使用。</p><p class="mb-2">2. 本行程報價已包含機場稅與燃油附加費。</p><p class="mb-2">3. 本行程報價未包含旅遊平安保險及旅遊不便險。</p><p class="mb-2">4. 本行程報價未包含每日旅館客房清理及行李小費。</p><p>5. 本行程未包含護照新辦及簽證費用，如有需要代辦，請洽詢專員。</p></div></div><div class="col-lg-6 mt-4 mt-lg-0"><h4 class="fw-bold text-primary"><i class="bi bi-exclamation-circle pe-2"></i>改退行程須知 </h4><div class="mt-3"><p class="mb-2">1. 若欲辦理取消或是更改行程，請務必先洽詢專員。</p><p class="mb-2">2. 未提前取消行程或因個人因素被拒絕入境，將無法申請退費。</p><p class="mb-2"> 3. 更改行程須依航空公司之規定扣除相關費用外，公司另收取手續費每人 500 元。 </p><p class="mb-2"> 4. 取消行程須依航空公司之規定扣除相關費用外，公司另收取手續費每人 1000 元。 </p><p>5. 若遇不可抗力因素如天候異常等導致行程被迫更改或取消，公司不另收取手續費。</p></div></div></div>',1))])]),e("div",jt,[e("div",At,[t[11]||(t[11]=e("h2",{class:"text-center fw-bolder mb-5 text-primary text-nowrap"},"熱門行程",-1)),g(w)])])])],64)}const Et=A(ot,[["render",Dt]]);export{Et as default};
