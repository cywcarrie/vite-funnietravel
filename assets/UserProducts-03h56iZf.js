import{_ as F,k as S,s as q,g,f as G,l as J,m as K,c as n,d as y,a as t,w as j,F as w,n as C,i as Q,p as X,q as Y,t as r,x as Z,S as A,r as I,o as i,b as p,y as R,z as N,j as $,u as tt}from"./index-D70-UL4c.js";import{P as ot}from"./PaginationComponent-i9K37NUa.js";import{V as et}from"./VueLoading-Dw2jX6kz.js";const T="/vite-funnietravel/assets/category1-B5Oxw5uN.jpeg",H="/vite-funnietravel/assets/category2-NmhEf9gE.jpeg",st={全部:{name:"全部",describe:"東南亞熱門旅遊的四個國家，泰國、新加坡、馬來西亞、印尼 (峇里島)。",img:T},峇里島:{name:"峇里島",describe:"是集東南亞神話、藝術、夢幻於一身的南洋島國，也是很熱門的度假勝地。",img:H,badge1:"海島輕旅行",badge2:"自在島日子",badge3:"一生必去"},泰國:{name:"泰國",describe:"擁有「東方威尼斯」美譽的曼谷與被稱為泰國黃金海岸的度假勝地 - 芭達雅。",img:H,badge1:"玩轉微笑國",badge2:"吃逛不設限",badge3:"人氣首選"},新加坡:{name:"新加坡",describe:"是東南亞最美麗的花園城市，也是東南亞治安最好的國際都會城市。",img:T,badge1:"探索花園城",badge2:"輕鬆走透透",badge3:"食尚探索"},馬來西亞:{name:"馬來西亞",describe:"吉隆坡是一座新舊輝映、東方色彩與西方文明有機融合的新興大都市。",img:T,badge1:"品味真亞洲",badge2:"自由輕旅行",badge3:"文化之旅"}},at={BASE_URL:"/vite-funnietravel/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funnietravel-api"},{VITE_APP_API:rt,VITE_APP_PATH:nt}=at,it={components:{VueLoading:et,Pagination:ot},setup(){const m=$("$axios"),o=Z(),h=tt(),{addCart:s}=S(),{isDone:L}=q(S()),V=g({}),f=g([]),l=g(o.params.category||""),x=["全部","峇里島","泰國","新加坡","馬來西亞"],e=g(st),c=g("價格"),E=g({}),P=g(!1),B=G({loadingItem:""});function k(a=1){P.value=!0;const v=`${rt}api/${nt}/products/all`;m.get(v).then(d=>{if(d.data.success){let b=d.data.products;l.value&&l.value!=="全部"&&(b=b.filter(W=>W.category===l.value));const u=6,_=Math.ceil(b.length/u),U=(a-1)*u,z=a*u;f.value=b.slice(U,z),E.value={current_page:a,has_next:a<_,has_pre:a>1,total_pages:_},D()}else A("error",d.data.message||"無法取得產品資料")}).catch(d=>{var u,_;const b=((_=(u=d.response)==null?void 0:u.data)==null?void 0:_.message)||"發生錯誤，請稍後再試";A("error",b)}).finally(()=>{P.value=!1})}function M(a){h.push(`/products/${a}`)}function O(a){h.push(`/product/${a}`)}function D(){let a="";f.value.sort((v,d)=>c.value==="priceLowToHigh"?a=v.price-d.price:c.value==="priceHighToLow"?a=d.price-v.price:a)}return J(()=>o.params.category,a=>{o.name==="products"&&(l.value=a,k())}),K(()=>{k()}),{product:V,products:f,category:l,categoryIntro:e,categories:x,selectPrice:c,pagination:E,isLoading:P,status:B,isDone:L,getProducts:k,goToCategory:M,getProduct:O,sortedProducts:D,addCart:s}}},lt={class:"mb-5"},dt={class:"container"},ct={"aria-label":"breadcrumb",style:{"--bs-breadcrumb-divider":"'>'"},class:"mt-3 mb-md-4 d-flex justify-content-start"},gt={class:"breadcrumb"},bt={class:"breadcrumb-item"},ut={class:"row my-5"},pt={class:"col-lg-3 mb-4 mb-lg-0"},mt={class:"list-group list-group-flush text-start d-none d-md-block"},ft=["onClick"],_t={class:"d-block d-md-none"},vt={class:"dropdown w-100"},yt={class:"dropdown-menu w-100"},wt=["onClick"],ht={class:"d-flex align-items-center flex-nowrap ms-auto mt-3"},xt={class:"col-lg-9"},Pt={class:"row mb-3 mb-lg-4"},kt={class:"col-12"},Ct={class:"text-white fw-bolder fs-2 pt-4 ps-4"},It={class:"text-white fw-bolder fs-5 px-4"},Tt={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3"},Lt={class:"card product-card w-100 h-100"},Vt=["onClick"],Et=["src"],Dt={class:"category-text d-flex justify-content-start align-items-start text-white p-3 fw-bold"},St={class:"card-body p-3"},jt={class:"fs-5 card-title fw-bolder mb-2 text-primary"},At={class:"d-flex align-items-center mb-3 gap-2"},Rt={class:"badge text-bg-light p-2 rounded-pill text-nowrap"},Nt={class:"badge text-bg-light p-2 rounded-pill text-nowrap"},Ht={class:"badge text-bg-light p-2 rounded-pill text-nowrap"},Bt={class:"d-flex justify-content-between align-items-center mb-3"},Mt={key:0,class:"fs-6 text-dark-emphasis text-decoration-line-through"},Ot={key:1,class:"fs-5 text-danger fw-bold"},Ut={key:2,class:"fs-5 text-dark-emphasis"},zt={class:"card-footer border-0 bg-transparent pt-0 pb-3"},Wt=["disabled","onClick"],Ft={key:0,class:"spinner-border text-primary spinner-border-sm",role:"status"};function qt(m,o,h,s,L,V){const f=I("VueLoading"),l=I("RouterLink"),x=I("Pagination");return i(),n(w,null,[y(f,{active:s.isLoading},null,8,["active"]),o[15]||(o[15]=t("div",{class:"my-5 position-relative banner container-fluid",style:{background:"linear-gradient(to right, #90afc5, #336b87)"}},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title fs-2"},"行程列表")],-1)),t("section",lt,[t("div",dt,[t("nav",ct,[t("ol",gt,[t("li",bt,[y(l,{to:"/",class:"text-dark hover-nav fw-bold"},{default:j(()=>o[2]||(o[2]=[p("首頁")])),_:1})]),o[3]||(o[3]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"行程列表",-1))])]),t("div",ut,[t("div",pt,[o[9]||(o[9]=t("h3",{class:"text-start pb-3 fw-bold fs-4 border-bottom border-primary border-2 d-none d-md-block"}," 旅遊目的地 ",-1)),t("div",mt,[(i(!0),n(w,null,C(s.categories,e=>(i(),n("button",{key:"category-"+e,type:"button",class:R(["list-group-item list-group-item-action fw-bold",{active:s.category===e}]),onClick:c=>s.goToCategory(e)},[o[4]||(o[4]=t("i",{class:"bi bi-globe me-2"},null,-1)),p(" "+r(e),1)],10,ft))),128))]),t("div",_t,[t("div",vt,[o[6]||(o[6]=t("button",{class:"btn btn-secondary dropdown-toggle w-100 fw-bold",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," 旅遊目的地 ",-1)),t("ul",yt,[(i(!0),n(w,null,C(s.categories,e=>(i(),n("li",{key:"dropdown-category-"+e},[t("button",{type:"button",class:R(["dropdown-item fw-bold",{active:s.category===e}]),onClick:c=>s.goToCategory(e)},[o[5]||(o[5]=t("i",{class:"bi bi-globe me-2"},null,-1)),p(" "+r(e),1)],10,wt)]))),128))])])]),t("div",ht,[o[8]||(o[8]=t("label",{class:"me-2 mb-0 text-nowrap"},"排序：",-1)),Q(t("select",{class:"form-select fw-bold","aria-label":"Default select example","onUpdate:modelValue":o[0]||(o[0]=e=>s.selectPrice=e),onChange:o[1]||(o[1]=e=>s.sortedProducts())},o[7]||(o[7]=[t("option",{selected:"",disabled:"",class:"fw-bold"},"價格",-1),t("option",{value:"priceLowToHigh",class:"fw-bold"},"由低至高",-1),t("option",{value:"priceHighToLow",class:"fw-bold"},"由高至低",-1)]),544),[[X,s.selectPrice]])])]),t("div",xt,[t("div",Pt,[t("div",kt,[t("div",{class:"rounded products-all",style:Y(`
              background-image: linear-gradient(rgba(0,0,0,0.3),rgba(0,0,0,0.3)),
              url(${s.categoryIntro[s.category].img});`)},[t("h3",Ct,r(s.category),1),t("p",It,r(s.categoryIntro[s.category].describe),1)],4)])]),t("div",Tt,[(i(!0),n(w,null,C(s.products,e=>(i(),n("div",{class:"col mb-4",key:`product-${e.id}`},[t("div",Lt,[y(l,{class:"",to:`/product/${e.id}`},{default:j(()=>[t("div",{class:"product-img cursor-pointer",onClick:c=>s.getProduct(e.id)},[t("img",{src:e.imageUrl,class:"card-img-top object-fit-cover",alt:"allProuctsImages"},null,8,Et),t("span",Dt,[o[10]||(o[10]=t("i",{class:"bi bi-globe pe-2"},null,-1)),p(" "+r(e.category),1)])],8,Vt),t("div",St,[t("h4",jt,r(e.title),1),t("div",At,[t("small",Rt,r(s.categoryIntro[e.category].badge1),1),t("small",Nt,r(s.categoryIntro[e.category].badge2),1),t("small",Ht,r(s.categoryIntro[e.category].badge3),1)]),t("div",Bt,[e.price?(i(),n("div",Mt," TWD "+r(m.$format.currency(e.origin_price)),1)):N("",!0),e.price?(i(),n("div",Ot,[o[11]||(o[11]=t("small",{class:"text-body-secondary"},"TWD",-1)),p(" "+r(m.$format.currency(e.price)),1)])):(i(),n("div",Ut," TWD "+r(m.$format.currency(e.origin_price)),1))])])]),_:2},1032,["to"]),t("div",zt,[t("button",{type:"button",class:"btn btn-outline-primary w-100",disabled:s.status.loadingItem===e.id,onClick:c=>s.addCart(e.id)},[s.status.loadingItem===e.id?(i(),n("div",Ft,o[12]||(o[12]=[t("span",{class:"visually-hidden"},"Loading...",-1)]))):N("",!0),o[13]||(o[13]=t("i",{class:"bi bi-cart-fill"},null,-1)),o[14]||(o[14]=p(" 加入購物車 "))],8,Wt)])])]))),128))]),y(x,{pages:s.pagination,onEmitPages:s.getProducts},null,8,["pages","onEmitPages"])])])])])],64)}const Qt=F(it,[["render",qt]]);export{Qt as default};
