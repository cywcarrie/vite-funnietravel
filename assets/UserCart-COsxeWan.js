import{_ as w,m as x,h as m,i as k,c as n,d,a as t,f as _,w as p,F as f,b as a,l as h,t as i,p as r,g as y,v,e as V,r as g,o as l}from"./index-BnbIaM3M.js";import{V as $}from"./VueLoading-Dz9SeSZ1.js";const j={components:{VueLoading:$},data(){return{coupon_code:""}},methods:{...x(m,["getCart","updateCart","removeCartItem","deleteAllCart","getProduct","addCouponCode","copyCouponCode"])},computed:{...k(m,["carts","total","final_total","cart","isLoading"])},mounted(){this.getCart()}},L={class:"mb-5"},N={class:"container"},q={"aria-label":"breadcrumb",class:"mt-3 mb-md-4 d-flex justify-content-start"},A={class:"breadcrumb"},S={class:"breadcrumb-item"},U={class:"d-flex justify-content-between mt-4"},B={class:"row mt-4 mb-5 bg-light rounded-2 py-3"},D={class:"col table-responsive mt-4 mb-4"},F={class:"table align-middle text-center table-light table-borderless"},I={class:"text-center"},M=["onClick"],P={key:0,class:"text-success"},R={class:"text-nowrap"},T={class:"d-flex justify-content-center"},E={class:"input-group input-group-sm cart-qty"},z=["onChange","onUpdate:modelValue"],G={class:"input-group-text"},H={class:"text-end text-nowrap"},J={class:"text-end text-nowrap"},K={key:0,class:"text-success"},O=["onClick"],Q={class:"text-end fs-4 text-primary fw-bold"},W={key:0},X={class:"text-end text-success fs-4 fw-bold"},Y={class:"d-flex justify-content-end align-items-center"},Z={key:0,class:"input-group mb-3 coupon-input"},tt={class:"d-flex justify-content-end align-items-center mb-4"},st={key:0,class:"text-end mt-4 mb-4"},et={key:1,class:"py-5 mb-5"},ot={class:"text-center pt-4"};function nt(e,s,lt,at,b,rt){const C=g("VueLoading"),c=g("RouterLink");return l(),n(f,null,[d(C,{active:e.isLoading},null,8,["active"]),s[20]||(s[20]=t("div",{class:"d-flex justify-content-center align-items-center my-5 position-relative banner banner1 container-fluid"},[t("h2",{class:"position-absolute text-center text-white fw-bolder banner-title"},"購物車")],-1)),t("section",L,[t("div",N,[t("a",{href:"#",title:"回上一頁",class:"text-secondary fw-bold",onClick:s[0]||(s[0]=_(o=>e.$router.go(-1),["prevent"]))},s[5]||(s[5]=[t("i",{class:"bi bi-arrow-left-square-fill fs-2"},null,-1)])),t("nav",q,[t("ol",A,[t("li",S,[d(c,{to:"/",class:"text-dark hover-nav fw-bold"},{default:p(()=>s[6]||(s[6]=[a("首頁")])),_:1})]),s[7]||(s[7]=t("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1))])]),e.cart.total!==0?(l(),n(f,{key:0},[s[17]||(s[17]=t("div",{class:"d-flex justify-content-center mt-5"},[t("h2",{class:"fw-bold"},"購物車清單")],-1)),t("div",U,[d(c,{class:"btn btn-outline-primary",to:"/products/全部"},{default:p(()=>s[8]||(s[8]=[t("i",{class:"bi bi-cart pe-1"},null,-1),a("繼續選購")])),_:1}),t("button",{type:"button",class:"btn btn-outline-danger",onClick:s[1]||(s[1]=(...o)=>e.deleteAllCart&&e.deleteAllCart(...o))},s[9]||(s[9]=[t("i",{class:"bi bi-trash3 pe-1"},null,-1),a("清空購物車 ")]))]),t("div",B,[t("div",D,[t("table",F,[s[13]||(s[13]=t("thead",{class:"table-secondary"},[t("tr",{class:"table-nowrap"},[t("th",{class:"text-nowrap"},"行程名稱"),t("th",{class:"text-nowrap"},"數量"),t("th",{class:"text-end"},"單價"),t("th",{class:"text-end"},"小計"),t("th",{class:"text-end"})])],-1)),t("tbody",I,[(l(!0),n(f,null,h(e.cart.carts,o=>(l(),n("tr",{class:"table-nowrap",key:o.id},[t("td",{class:"text-nowrap fw-bold text-primary cursor-pointer hover-nav",onClick:u=>e.getProduct(o.product_id)},[a(i(o.product.title)+" ",1),o.coupon?(l(),n("div",P,"已套用優惠券")):r("",!0)],8,M),t("td",R,[t("div",T,[t("div",E,[y(t("input",{type:"number",class:"form-control",min:"1",onChange:u=>e.updateCart(o),"onUpdate:modelValue":u=>o.qty=u},null,40,z),[[v,o.qty,void 0,{number:!0}]]),t("div",G,"/ "+i(o.product.unit),1)])])]),t("td",H,i(e.$filters.currency(o.product.price)),1),t("td",J,[e.cart.final_total!==e.cart.total?(l(),n("small",K,"優惠價：")):r("",!0),a(" "+i(e.$filters.currency(o.final_total)),1)]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:u=>e.removeCartItem(o.id)},s[10]||(s[10]=[t("i",{class:"bi bi-trash"},null,-1)]),8,O)])]))),128))]),t("tfoot",null,[t("tr",null,[s[11]||(s[11]=t("td",{colspan:"3",class:"text-end fs-4"},"總計",-1)),t("td",Q,i(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(l(),n("tr",W,[s[12]||(s[12]=t("td",{colspan:"3",class:"text-end text-success fs-4"},"優惠價",-1)),t("td",X,i(e.$filters.currency(e.cart.final_total)),1)])):r("",!0)])])]),t("div",Y,[e.cart.total!==0?(l(),n("div",Z,[y(t("input",{type:"text",class:"form-control border-primary","onUpdate:modelValue":s[2]||(s[2]=o=>b.coupon_code=o),placeholder:"請輸入優惠碼"},null,512),[[v,b.coupon_code]]),t("button",{class:"btn btn-outline-primary",type:"button",onClick:s[3]||(s[3]=o=>e.addCouponCode(b.coupon_code))}," 套用優惠碼 ")])):r("",!0)]),s[16]||(s[16]=V('<div class="d-flex justify-content-end align-items-center mb-2"><div class="fs-6 fw-bold text-primary"><i class="bi bi-globe pe-2"></i>輸入優惠碼 <span class="fs-5 fw-bold text-secondary">funnietravel</span> 即享 <span class="fs-5 fw-bold text-secondary">85 </span>折優惠 </div></div>',1)),t("div",tt,[t("button",{onClick:s[4]||(s[4]=(...o)=>e.copyCouponCode&&e.copyCouponCode(...o)),class:"btn btn-outline-primary",type:"button"},s[14]||(s[14]=[t("span",null,[t("i",{class:"bi bi-clipboard-fill pe-1"}),t("span",null,"複製優惠碼")],-1)]))]),e.cart.total!==0?(l(),n("div",st,[d(c,{class:"btn btn-primary",to:"/checkout"},{default:p(()=>s[15]||(s[15]=[a("前往結帳"),t("i",{class:"bi bi-caret-right-fill"},null,-1)])),_:1})])):r("",!0)])],64)):r("",!0),e.cart.total===0?(l(),n("div",et,[t("div",ot,[s[19]||(s[19]=t("h2",{class:"fw-bolder mb-5"},"您尚未有行程加入購物車",-1)),d(c,{class:"btn btn-primary btn-lg fw-bold",to:"/products/全部"},{default:p(()=>s[18]||(s[18]=[a("馬上開始選購吧 !")])),_:1})])])):r("",!0)])])],64)}const ct=w(j,[["render",nt]]);export{ct as default};
