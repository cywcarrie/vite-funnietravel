import{_ as A,A as E,m as S,o,c as i,h as R,g as v,k as N,s as I,l as q,d as _,a as s,w as T,t as a,b as d,B as M,z as w,e as j,i as U,v as W,F as k,n as H,x as O,S as F,r as g,j as z,u as G}from"./index-DoFs1oRD.js";import{u as D}from"./favoriteStore-D8Dp2Uo-.js";import{V as J}from"./VueLoading-C6XjlELo.js";import{S as K}from"./SwiperComponent-BWVwCD8t.js";const Q={props:{productFavoriteId:{type:[String,Number]}},setup(r){const t=D(),m=E(()=>t.favoriteData.includes(r.productFavoriteId));function e(){t.addFavorite(r.productFavoriteId)}return S(()=>{t.getFavorite()}),{isFavorite:m,toggleFavorite:e}}},X={key:0,class:"bi bi-heart text-danger fs-3"},Y={key:1,class:"bi bi-heart-fill text-danger fs-3"};function Z(r,t,m,e,y,c){return o(),i("a",{href:"#",title:"我的最愛",onClick:t[0]||(t[0]=R(n=>e.toggleFavorite(),["prevent"])),class:"ps-3 ps-md-0"},[e.isFavorite?(o(),i("i",Y)):(o(),i("i",X))])}const $=A(Q,[["render",Z]]),tt={BASE_URL:"/vite-funnietravel/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funnietravel-api"},{VITE_APP_API:st,VITE_APP_PATH:et}=tt,ot={components:{VueLoading:J,FavoriteBtn:$,Swiper:K},setup(){const r=z("$axios"),t=O(),m=G(),e=v({}),y=v(1),c=v(""),n=v(!1),p=N(),{cart:x}=I(p),{addCart:h}=p,l=D(),{favoriteData:B}=I(l),{addFavorite:L}=l;q(()=>t.params.productId,b=>{b!==void 0?(c.value=b,u()):F("error","無法獲取產品資訊")});function u(){const b=`${st}api/${et}/product/${c.value}`;n.value=!0,r.get(b).then(f=>{n.value=!1,f.data.success?e.value=f.data.product:(F("error","無法獲取產品資訊"),m.push("/not-found"))}).catch(f=>{var V,P;const C=((P=(V=f.response)==null?void 0:V.data)==null?void 0:P.message)||"發生錯誤，請稍後再試";F("error",C)}).finally(()=>{n.value=!1})}return S(()=>{c.value=t.params.productId,u()}),S(()=>{u()}),{product:e,qty:y,isLoading:n,id:c,favoriteData:B,cart:x,addCart:h,getProduct:u,addFavorite:L}}},it={class:"mb-5"},rt={class:"container"},lt={"aria-label":"breadcrumb",style:{"--bs-breadcrumb-divider":"'>'"},class:"mt-3 mb-md-4 d-flex justify-content-start d-none d-md-block"},at={class:"breadcrumb"},nt={class:"breadcrumb-item"},dt={class:"breadcrumb-item"},ct={class:"breadcrumb-item active","aria-current":"page"},mt={class:"row d-flex justify-content-center mb-5 mt-4 mt-md-0"},pt={class:"col-lg-5"},ut=["src"],bt={class:"col-lg-7"},ft={class:"d-flex justify-content-start text-primary fw-bold"},vt={class:"mb-2"},_t={class:"d-flex justify-content-between align-items-center"},gt={class:"m-0 fw-bold fs-4"},yt={class:"d-flex justify-content-end align-items-center"},xt={key:0,class:"fs-6 text-dark-emphasis text-decoration-line-through"},ht={key:1,class:"fs-5 ms-2 text-danger fw-bold"},wt={key:2,class:"fs-5 text-dark-emphasis"},kt={class:"d-flex justify-content-end align-items-center"},Ft={class:"input-group mb-5 product-cart-input"},St={class:"row d-flex justify-content-center bg-light py-5 my-5 rounded-2"},Vt={class:"col-lg-6"},Pt={key:0,class:"mt-3 product-special-text"},It={class:"col-lg-6 mt-4 mt-lg-0"},Tt={class:"mt-3"},jt={class:"py-5"},At={class:"container"};function Dt(r,t,m,e,y,c){const n=g("VueLoading"),p=g("RouterLink"),x=g("FavoriteBtn"),h=g("Swiper");return o(),i(k,null,[_(n,{active:e.isLoading},null,8,["active"]),t[13]||(t[13]=s("div",{class:"my-5 position-relative banner container-fluid",style:{background:"linear-gradient(to right, #90afc5, #336b87)"}},[s("h2",{class:"position-absolute text-center text-white fw-bolder banner-title fs-2"},"行程資訊")],-1)),s("section",it,[s("div",rt,[s("nav",lt,[s("ol",at,[s("li",nt,[_(p,{to:"/",class:"text-dark hover-nav fw-bold"},{default:T(()=>t[2]||(t[2]=[d("首頁")])),_:1})]),s("li",dt,[_(p,{to:"/products/全部",class:"text-dark hover-nav fw-bold"},{default:T(()=>t[3]||(t[3]=[d("行程列表")])),_:1})]),s("li",ct,a(e.product.title),1)])]),s("div",mt,[s("article",pt,[s("img",{src:e.product.imageUrl,alt:"productImage",class:"img-fluid mb-3 bg-cover bg-center rounded-2"},null,8,ut)]),s("div",bt,[s("div",ft,[s("p",vt,[t[4]||(t[4]=s("i",{class:"bi bi-globe me-2"},null,-1)),d(a(e.product.category),1)])]),s("div",_t,[s("h3",gt,a(e.product.title),1),e.product.id?(o(),M(x,{key:0,productFavoriteId:e.product.id},null,8,["productFavoriteId"])):w("",!0)]),t[7]||(t[7]=j('<div class="d-flex align-items-center mt-2 gap-2"><small class="badge border border-dark-emphasis text-bg-light p-2 rounded-pill text-nowrap">2人成行</small><small class="badge border border-dark-emphasis text-bg-light p-2 rounded-pill text-nowrap">贈上網卡</small><small class="badge border border-dark-emphasis text-bg-light p-2 rounded-pill text-nowrap">中文導遊</small><small class="badge border border-dark-emphasis text-bg-light p-2 rounded-pill text-nowrap">限時優惠</small></div><div class="mt-4 text-primary"><p class="mb-2 fw-bold"><i class="bi bi-airplane-fill pe-2"></i>台北高雄皆可出發</p><p class="mb-2 fw-bold"><i class="bi bi-map-fill pe-2"></i>可客製化行程內容</p><p class="mb-2 fw-bold"><i class="bi bi-check-circle-fill pe-2"></i>可以延回或是續住</p><p class="fw-bold"><i class="bi bi-clock-fill pe-2"></i>24小時內確認訂單</p></div>',2)),s("div",yt,[e.product.price?(o(),i("div",xt," TWD "+a(r.$format.currency(e.product.origin_price)),1)):w("",!0),e.product.price?(o(),i("div",ht," TWD "+a(r.$format.currency(e.product.price)),1)):(o(),i("div",wt," TWD "+a(r.$format.currency(e.product.origin_price)),1))]),s("div",kt,[s("div",Ft,[t[6]||(t[6]=s("label",{for:"qty",class:"visually-hidden"},"數量",-1)),U(s("input",{id:"qty",type:"number",class:"form-control border-primary","onUpdate:modelValue":t[0]||(t[0]=l=>e.qty=l),min:"1"},null,512),[[W,e.qty,void 0,{number:!0}]]),s("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=l=>e.addCart(e.product.id,e.qty))},t[5]||(t[5]=[s("i",{class:"bi bi-cart-fill pe-1"},null,-1),d("加入購物車 ")]))])])]),s("div",St,[s("div",Vt,[t[9]||(t[9]=s("h4",{class:"fw-bold text-primary"},[s("i",{class:"bi bi-globe pe-2"}),d("行程特色")],-1)),e.product.content?(o(),i("div",Pt,[(o(!0),i(k,null,H(e.product.content.split(`
`),l=>(o(),i(k,{key:l},[d(a(l)+" ",1),t[8]||(t[8]=s("br",null,null,-1))],64))),128))])):w("",!0)]),s("div",It,[t[10]||(t[10]=s("h4",{class:"fw-bold text-primary"},[s("i",{class:"bi bi-globe pe-2"}),d("行程簡介")],-1)),s("div",Tt,a(e.product.description),1)])]),t[11]||(t[11]=j('<div class="row d-flex justify-content-center py-5 mt-2 rounded-2"><div class="col-lg-6"><h4 class="fw-bold text-primary"><i class="bi bi-exclamation-circle pe-2"></i>注意事項 </h4><ol class="mt-3"><li class="mb-2">本行程一經售出，不得轉讓他人使用。</li><li class="mb-2">本行程報價已包含兩地機場稅與燃油附加費。</li><li class="mb-2">本行程報價已包含每人一張不限流量上網卡。</li><li class="mb-2">本行程報價未包含旅遊平安保險與旅遊不便險。</li><li class="mb-2">本行程報價未包含每日旅館客房清理及行李小費。</li><li class="mb-2">本行程報價未包含旅客自行於當地消費所產生之費用。</li><li>本行程報價未包含護照申辦及簽證費用，如需代辦服務，請洽詢專員。</li></ol></div><div class="col-lg-6 mt-4 mt-lg-0"><h4 class="fw-bold text-primary"><i class="bi bi-exclamation-circle pe-2"></i>改退行程須知 </h4><ol class="mt-3"><li class="mb-2">若欲辦理取消或是更改行程，請務必先洽詢專員。</li><li class="mb-2">未提前取消行程或因個人因素被拒絕入境，將無法申請退費。</li><li class="mb-2"> 訂單成立後，更改或取消行程，除須依各航空公司之規定收取相關費用外，本公司將另收取相應之手續費。 </li><li class="mb-2"> 訂單成立後，更改或取消行程，其手續費或罰金將依各飯店回覆之金額為準。本公司將另收取相應之手續費。 </li><li> 若遇不可抗力因素如天候異常等導致行程被迫更改或取消，公司將不另收取任何手續費。 </li></ol></div></div>',1))])]),s("div",jt,[s("div",At,[t[12]||(t[12]=s("h2",{class:"text-center fw-bolder mb-5 text-primary text-nowrap"},"熱門行程",-1)),_(h)])])])],64)}const Rt=A(ot,[["render",Dt]]);export{Rt as default};
